"use strict";(self.webpackChunkomnis=self.webpackChunkomnis||[]).push([[257],{2257:(e,t,s)=>{s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(5043),r=s(4895),o=s(5472),l=s(9613),n=s(579);const __WEBPACK_DEFAULT_EXPORT__=()=>{const{currentUser:e}=(0,l.As)(),[t,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(""),[c,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0);(0,a.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return void x(!1);(async()=>{try{const e=(0,o.P)((0,o.rJ)(r.db,"chatHistory"),(0,o.My)("timestamp","desc")),t=(await(0,o.GG)(e)).docs.map((e=>{var t;return{id:e.id,...e.data(),timestamp:null!==(t=e.data().timestamp)&&void 0!==t&&t.seconds?new Date(1e3*e.data().timestamp.seconds).toLocaleString():"Unknown"}}));s(t),x(!1)}catch(e){console.error("\u274c Error retrieving history:",e),x(!1)}})()}),[e]);const g=t.filter((e=>e.scenarios.some((e=>e.toLowerCase().includes(i.toLowerCase())))));return(0,a.useEffect)((()=>{m(i?t.flatMap((e=>e.scenarios.filter((e=>e.toLowerCase().startsWith(i.toLowerCase()))))):[])}),[i,t]),(0,n.jsxs)("div",{className:"max-w-6xl mx-auto mt-8 p-8 bg-white dark:bg-gray-900 rounded-2xl shadow-lg hover:shadow-blue-500/50 rounded-lg border",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-center p-6 text-blue-600 dark:text-blue-300 mb-4",children:"Interaction History"}),(0,n.jsx)("input",{type:"text",placeholder:"Search past queries...",className:"w-full p-2 mb-4 border focus:ring-2 focus:ring-blue-500 rounded bg-white dark:bg-gray-700",value:i,onChange:e=>d(e.target.value)}),c.length>0&&(0,n.jsx)("ul",{className:"bg-gray-100 border rounded-lg max-h-32 overflow-y-auto mb-4",children:c.map(((e,t)=>(0,n.jsx)("li",{className:"p-2 hover:bg-gray-200 cursor-pointer",onClick:()=>d(e),children:e},t)))}),u?(0,n.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading history..."}):(0,n.jsx)("div",{className:"space-y-4",children:g.length>0?g.map((e=>(0,n.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-xl shadow",children:[(0,n.jsx)("p",{className:"text-green-600 font-semibold",children:"Action:"}),(0,n.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.action}),(0,n.jsx)("p",{className:"text-green-600 font-semibold mt-2",children:"Scenarios:"}),(0,n.jsx)("ul",{className:"list-disc pl-5 text-gray-900 dark:text-gray-300",children:e.scenarios.map(((e,t)=>(0,n.jsx)("li",{children:e},t)))}),(0,n.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:e.timestamp})]},e.id))):(0,n.jsxs)("p",{className:"text-center text-gray-500 dark:text-gray-400",children:['No results found for "',i,'".']})})]})}}}]);
//# sourceMappingURL=257.c5cfb2a6.chunk.js.map